"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[795],{2795:function(e,r,t){t.r(r),t.d(r,{FewShotChatMessagePromptTemplate:function(){return d},FewShotPromptTemplate:function(){return h}});var a=t(7762),n=t(3433),i=t(1413),l=t(4165),s=t(5861),p=t(5671),o=t(3144),u=t(7326),c=t(136),f=t(9388),m=t(8799),b=t(9649),x=t(4757),v=t(7225),h=function(e){(0,c.Z)(t,e);var r=(0,f.Z)(t);function t(e){var a;if((0,p.Z)(this,t),a=r.call(this,e),Object.defineProperty((0,u.Z)(a),"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,u.Z)(a),"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(a),"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(a),"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(a),"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty((0,u.Z)(a),"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty((0,u.Z)(a),"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty((0,u.Z)(a),"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty((0,u.Z)(a),"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign((0,u.Z)(a),e),void 0!==a.examples&&void 0!==a.exampleSelector)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===a.examples&&void 0===a.exampleSelector)throw new Error("One of 'examples' and 'example_selector' should be provided");if(a.validateTemplate){var n=a.inputVariables;a.partialVariables&&(n=n.concat(Object.keys(a.partialVariables))),(0,b.af)(a.prefix+a.suffix,a.templateFormat,n)}return a}return(0,o.Z)(t,[{key:"_getPromptType",value:function(){return"few_shot"}},{key:"getExamples",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.examples){e.next=2;break}return e.abrupt("return",this.examples);case 2:if(void 0===this.exampleSelector){e.next=4;break}return e.abrupt("return",this.exampleSelector.selectExamples(r));case 4:throw new Error("One of 'examples' and 'example_selector' should be provided");case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"partial",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){var a,n,s,p;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.inputVariables.filter((function(e){return!(e in r)})),s=(0,i.Z)((0,i.Z)({},null!==(a=this.partialVariables)&&void 0!==a?a:{}),r),p=(0,i.Z)((0,i.Z)({},this),{},{inputVariables:n,partialVariables:s}),e.abrupt("return",new t(p));case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"format",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){var t,a,i,s,p=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mergePartialAndUserVariables(r);case 2:return t=e.sent,e.next=5,this.getExamples(t);case 5:return a=e.sent,e.next=8,Promise.all(a.map((function(e){return p.examplePrompt.format(e)})));case 8:return i=e.sent,s=[this.prefix].concat((0,n.Z)(i),[this.suffix]).join(this.exampleSeparator),e.abrupt("return",(0,b.SM)(s,this.templateFormat,t));case 11:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"serialize",value:function(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(void 0!==this.outputParser)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}}],[{key:"lc_name",value:function(){return"FewShotPromptTemplate"}},{key:"deserialize",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){var a,n,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.example_prompt){e.next=3;break}throw new Error("Missing example prompt");case 3:return e.next=5,x.PromptTemplate.deserialize(a);case 5:if(n=e.sent,!Array.isArray(r.examples)){e.next=10;break}i=r.examples,e.next=11;break;case 10:throw new Error("Invalid examples format. Only list or string are supported.");case 11:return e.abrupt("return",new t({inputVariables:r.input_variables,examplePrompt:n,examples:i,exampleSeparator:r.example_separator,prefix:r.prefix,suffix:r.suffix,templateFormat:r.template_format}));case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),t}(m.Al),d=function(e){(0,c.Z)(t,e);var r=(0,f.Z)(t);function t(e){var a,n,i,l,s,o;if((0,p.Z)(this,t),o=r.call(this,e),Object.defineProperty((0,u.Z)(o),"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,u.Z)(o),"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty((0,u.Z)(o),"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty((0,u.Z)(o),"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty((0,u.Z)(o),"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty((0,u.Z)(o),"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),o.examples=e.examples,o.examplePrompt=e.examplePrompt,o.exampleSeparator=null!==(a=e.exampleSeparator)&&void 0!==a?a:"\n\n",o.exampleSelector=e.exampleSelector,o.prefix=null!==(n=e.prefix)&&void 0!==n?n:"",o.suffix=null!==(i=e.suffix)&&void 0!==i?i:"",o.templateFormat=null!==(l=e.templateFormat)&&void 0!==l?l:"f-string",o.validateTemplate=null===(s=e.validateTemplate)||void 0===s||s,void 0!==o.examples&&void 0!==o.exampleSelector)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===o.examples&&void 0===o.exampleSelector)throw new Error("One of 'examples' and 'example_selector' should be provided");if(o.validateTemplate){var c=o.inputVariables;o.partialVariables&&(c=c.concat(Object.keys(o.partialVariables))),(0,b.af)(o.prefix+o.suffix,o.templateFormat,c)}return o}return(0,o.Z)(t,[{key:"_getPromptType",value:function(){return"few_shot_chat"}},{key:"getExamples",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.examples){e.next=2;break}return e.abrupt("return",this.examples);case 2:if(void 0===this.exampleSelector){e.next=4;break}return e.abrupt("return",this.exampleSelector.selectExamples(r));case 4:throw new Error("One of 'examples' and 'example_selector' should be provided");case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"formatMessages",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){var t,i,s,p,o,u,c,f=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mergePartialAndUserVariables(r);case 2:return t=e.sent,e.next=5,this.getExamples(t);case 5:i=(i=e.sent).map((function(e){var r={};return f.examplePrompt.inputVariables.forEach((function(t){r[t]=e[t]})),r})),s=[],p=(0,a.Z)(i),e.prev=9,p.s();case 11:if((o=p.n()).done){e.next=19;break}return u=o.value,e.next=15,this.examplePrompt.formatMessages(u);case 15:c=e.sent,s.push.apply(s,(0,n.Z)(c));case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),p.e(e.t0);case 24:return e.prev=24,p.f(),e.finish(24);case 27:return e.abrupt("return",s);case 28:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(r){return e.apply(this,arguments)}}()},{key:"format",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){var t,a,i,s,p,o=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mergePartialAndUserVariables(r);case 2:return t=e.sent,e.next=5,this.getExamples(t);case 5:return a=e.sent,e.next=8,Promise.all(a.map((function(e){return o.examplePrompt.formatMessages(e)})));case 8:return i=e.sent,s=i.flat().map((function(e){return e.content})),p=[this.prefix].concat((0,n.Z)(s),[this.suffix]).join(this.exampleSeparator),e.abrupt("return",(0,b.SM)(p,this.templateFormat,t));case 12:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"partial",value:function(){var e=(0,s.Z)((0,l.Z)().mark((function e(r){var a,n,s,p;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.inputVariables.filter((function(e){return!(e in r)})),s=(0,i.Z)((0,i.Z)({},null!==(a=this.partialVariables)&&void 0!==a?a:{}),r),p=(0,i.Z)((0,i.Z)({},this),{},{inputVariables:n,partialVariables:s}),e.abrupt("return",new t(p));case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}],[{key:"lc_name",value:function(){return"FewShotChatMessagePromptTemplate"}}]),t}(v.S)}}]);
//# sourceMappingURL=795.b3cc913d.chunk.js.map